---
phase: 02.1-gpu-access-control-research
plan: 01
subsystem: access-control
tags: [gpu-access, cuda-visible-devices, hpc, design-document, three-layer-architecture]

# Dependency graph
requires:
  - phase: 02-awareness-layer
    provides: CUDA_VISIBLE_DEVICES deployment via profile.d, workload detection scanner
provides:
  - Design decision document grounding GPU access control in HPC best practices
  - Phase 3 audit with specific 03-03 revision instructions
  - Validation that 03-01 and 03-02 are correct as-is
affects: [03-access-control, 02.1-02-plan-updates]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Three-layer GPU access control: CUDA_VISIBLE_DEVICES (UX) + Docker device mapping (security) + video group (exemptions)"
    - "CUDA_VISIBLE_DEVICES as deterrent, not security boundary — documented and accepted"
    - "Device permission manipulation is anti-pattern — keep defaults (0666)"

key-files:
  created:
    - .planning/phases/02.1-gpu-access-control-research/02.1-DESIGN.md
  modified: []

key-decisions:
  - "Three-layer architecture: CUDA_VISIBLE_DEVICES + Docker device mapping + video group exemptions"
  - "Device permissions stay at defaults (0666) — no udev rules, no 0660"
  - "nvidia-* wrappers are UX tools, not security enforcement"
  - "CUDA_VISIBLE_DEVICES is a deterrent (UX), not a security boundary — accepted"
  - "Video group membership controls profile.d exemption, not device access"
  - "03-03 needs major revision: remove udev rules, add profile.d exemption logic"

patterns-established:
  - "Design documents synthesise research into actionable implementation decisions"
  - "Phase audits validate existing work against new findings before revising"

# Metrics
duration: 3min
completed: 2026-01-31
---

# Phase 02.1 Plan 01: GPU Access Control Design Document Summary

**Three-layer GPU access control design grounded in HPC best practices: CUDA_VISIBLE_DEVICES deterrent + Docker device mapping security boundary + video group exemptions**

## Performance

- **Duration:** 3 min
- **Completed:** 2026-01-31
- **Tasks:** 2 (1 auto + 1 human-verify checkpoint)
- **Files created:** 1

## Accomplishments

- Design decision document (02.1-DESIGN.md) synthesising research into concrete three-layer architecture
- Phase 3 audit: 03-01 valid (UX tool), 03-02 valid (independent), 03-03 needs major revision
- Specific 03-03 revision items documented: remove udev rules, remove device permissions, add profile.d exemption logic
- Architecture diagram showing full GPU access control flow
- Deployment verified: nvidia-smi works, GPU allocator functional, CUDA_VISIBLE_DEVICES active

## Task Commits

1. **Task 1: Write GPU access control design document** - `f085386` (docs)
2. **Task 2: Human verification checkpoint** - approved by user

**Plan metadata:** (this commit)

## Files Created

- `.planning/phases/02.1-gpu-access-control-research/02.1-DESIGN.md` (391 lines) — Design decision document with executive summary, three-layer architecture, rejected alternatives, Phase 3 audit, 03-03 revision items, architecture diagram

## Decisions Made

1. **Three-layer architecture** — CUDA_VISIBLE_DEVICES (host UX deterrent) + Docker device mapping (kernel security) + video group (exemptions). Aligns with SLURM/Kubernetes patterns.
2. **Device permissions stay at defaults** — No udev rules, no 0660 enforcement. Anti-pattern per HPC research.
3. **nvidia-* wrappers retained as UX** — Helpful error messages, not security enforcement. CUDA uses /dev/nvidia* directly.
4. **CUDA_VISIBLE_DEVICES is not a security boundary** — Documented and accepted. Container enforcement is the security layer.
5. **Video group controls profile.d exemption** — Not device access. Profile.d script checks video group to decide whether to set CUDA_VISIBLE_DEVICES="".
6. **03-03 needs major revision** — Remove udev rules and device permission enforcement, add profile.d exemption logic.

## Deviations from Plan

None — plan executed exactly as written.

## Issues Encountered

None

## User Setup Required

None — no external service configuration required.

## Next Phase Readiness

**Plan 02.1-02 dependencies:**
- ✅ Design document exists for reference
- ✅ 03-03 revision items clearly documented
- ✅ Profile.d exemption logic specified

**Ready to proceed:** Yes — Plan 02.1-02 updates 03-03-PLAN.md and ds01-gpu-awareness.sh based on this design.

---
*Phase: 02.1-gpu-access-control-research*
*Completed: 2026-01-31*
